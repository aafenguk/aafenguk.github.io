<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>aafeng</title>
  <icon>https://www.gravatar.com/avatar/a176a52d9d4ac7d9f90a5204a7d87bcd</icon>
  <subtitle>aafeng&#39;s blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://aafenguk.github.io/"/>
  <updated>2020-04-12T15:20:25.017Z</updated>
  <id>https://aafenguk.github.io/</id>
  
  <author>
    <name>aafeng</name>
    <email>aafenguk@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>复活节花园寻宝</title>
    <link href="https://aafenguk.github.io/easter-egg-hunting/"/>
    <id>https://aafenguk.github.io/easter-egg-hunting/</id>
    <published>2020-04-12T15:20:25.017Z</published>
    <updated>2020-04-12T15:20:25.017Z</updated>
    
    <content type="html"><![CDATA[<p>复活节如期而至，其实每年都选择在复活节假期回国和家人团聚。但今年因疫情被迫取消了航班，第一次带着孩子在英国度过复活节。</p><p><img src="/images/life/easter/easter-egg.jpg" alt="复活节彩蛋"><br>图源：pixabay</p><p>不过凡事都尽量往好处想，孩子们一直喜欢复活节时在花园中寻找复活节彩蛋这个游戏，但由于每年的复活节都在中国，因此一直没能满足他们的这个心愿。今年正好满足一下他们的这个小小愿望。</p><a id="more"></a><p>由于疫情，现在复活节彩蛋都限购，只买到一点点的彩蛋。但孩子们更喜欢的是这个游戏本身，彩蛋的多少应该不是最重要的。</p><p><img src="/images/life/easter/01.jpg" alt="复活节彩蛋"></p><p>其实，在寻找复活节彩蛋游戏中，还有一个主角，就是复活节小兔子。在传说中，复活节小兔子将彩蛋藏起来。之所以是兔子，可能是因为它们强大的生育能力吧，毕竟复活节意味着新生命的诞生。</p><p>我自然就成了客串小兔子的角色，将彩蛋藏在了花园中。</p><p>藏在了苹果树的树枝上：<br><img src="/images/life/easter/02.jpg" alt="复活节彩蛋"></p><p>梨树上：<br><img src="/images/life/easter/03.jpg" alt="复活节彩蛋"></p><p>孩子们做游戏的小房子这里：</p><p><img src="/images/life/easter/04.jpg" alt="复活节彩蛋"></p><p>浇水用的小水壶中：<br><img src="/images/life/easter/05.jpg" alt="复活节彩蛋"></p><p>很快，这些彩蛋就都被找到了。彩蛋内部一般都是空的，象征着耶稣复活后空空的坟墓。其实时至今日，复活节的宗教色彩已经慢慢淡化了，成了很多家庭度假的热门时段。期待早日恢复正常，把错过的假期补上。</p>]]></content>
    
    <summary type="html">
    
      复活节花园寻宝
    
    </summary>
    
      <category term="生活" scheme="https://aafenguk.github.io/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="复活节" scheme="https://aafenguk.github.io/tags/%E5%A4%8D%E6%B4%BB%E8%8A%82/"/>
    
      <category term="彩蛋" scheme="https://aafenguk.github.io/tags/%E5%BD%A9%E8%9B%8B/"/>
    
  </entry>
  
  <entry>
    <title>实时推送Hive区块链信息到Telegram客户端（2）</title>
    <link href="https://aafenguk.github.io/hive-telegram-2/"/>
    <id>https://aafenguk.github.io/hive-telegram-2/</id>
    <published>2020-04-11T09:00:00.000Z</published>
    <updated>2020-04-12T15:19:12.754Z</updated>
    
    <content type="html"><![CDATA[<p>在<a href="/hive-telegram-1/">上一篇文章</a>中讲到了整个程序的思路，以及如何读取Hive区块链信息，并回溯N个区块。在这篇文章中讲讲如何在区块信息中过滤信息，并根据自己定义的规则生成待发送的信息。</p><p><img src="/images/hive/hive-telegram-2.jpg" alt></p><a id="more"></a><p>首先，需要定义一些用于筛选信息的规则。这里的一个基本原则就是所定义的规则一定要和程序代码分离，这样最终的程序才容易维护。任何时候想要更改规则的话，只需要修改定义规则的配置文件，而无需修改程序代码。比如：</p><pre><code>rules:  votes:    any_to_aafeng:      from:       &quot;*&quot;      to:         aafeng      exclude:    aafeng,aafeng.test      min_weight: 20</code></pre><p>上面定义了一组规则：除去’aafeng’和’aafeng.test’之外的任何用户对’aafeng’这个用户的点赞，如果点赞额度&gt;=20%，则符合这个规则。</p><p>再举一个关于转账的规则：</p><pre><code>transfers:  any_to_aafeng:    from:        &quot;*&quot;    to:          aafeng    min_account: 1            aafeng_to_any:    from:        aafeng    to:          &quot;*&quot;    min_account: 0 </code></pre><p>上面规则定义了：任何向’aafeng’转入的金额&gt;=1，符合规则。任何从’aafeng’转出的金额&gt;=0，符合规则。这条规则对于监测账号的资金变化非常有用。</p><p>除了上述的两类关于点赞和转账的规则，你还可以定义很多规则，比如：留言，发帖，提到你等等。道理都非常类似，这里就不一一例举了。</p><p>规则都定义了好了之后，我们需要考虑在程序中如何支持这样的规则，下面是对点赞规则的实现：</p><pre><code>HIVE_BASE_URL = &apos;\https://hive.blog/&apos;# check if there is a matched vote ruledef get_vote_message(vote_rules, transaction):  messages   = &apos;&apos;  try:    t_voter    = transaction[&quot;voter&quot;]     t_author   = transaction[&quot;author&quot;]    t_weight   = transaction[&apos;weight&apos;]/100.00    t_permlink = transaction[&apos;permlink&apos;]    for vr in vote_rules:      # check exclude       if t_voter in vote_rules[vr][&quot;exclude&quot;].split(&quot;,&quot;):        continue      # check if voting weight matches      if t_weight&gt;0 and t_weight &lt; vote_rules[vr][&quot;min_weight&quot;]:        continue      # check voter and votee matches      if (t_voter==vote_rules[vr][&quot;from&quot;] and t_author==vote_rules[vr][&quot;to&quot;]) or \         (&apos;*&apos;==vote_rules[vr][&quot;from&quot;]     and t_author==vote_rules[vr][&quot;to&quot;]) or \         (t_voter==vote_rules[vr][&quot;from&quot;] and &apos;*&apos;==vote_rules[vr][&quot;to&quot;]):        messages = messages + &quot;VOTE: %s --&gt; %s [%.2f]: %s/@%s/%s\n\n&quot; % (t_voter,t_author,t_weight,HIVE_BASE_URL,t_author,t_permlink)  except Exception as e:    traceback.print_exc()    return None  if messages!=&apos;&apos;:    return messages  else:    return None        </code></pre><p>通过上面的程序，就可以从区块链信息中过滤出自己感兴趣的点赞信息了。下一篇讲讲如何配置Telegram。</p>]]></content>
    
    <summary type="html">
    
      实时推送Hive区块链信息到Telegram客户端（2）
    
    </summary>
    
      <category term="技术" scheme="https://aafenguk.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Hive" scheme="https://aafenguk.github.io/tags/Hive/"/>
    
      <category term="Telegram" scheme="https://aafenguk.github.io/tags/Telegram/"/>
    
  </entry>
  
</feed>
